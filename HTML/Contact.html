<!DOCTYPE html>
<html lang="he" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>גמחהון - איש קשר</title>
    <link type="text/css" href="../CSS/GmacHon.css" rel="stylesheet" />

    <script type="text/javascript" src="../Third Party Code/jquery.min.js"></script>

    <script type="text/javascript" src="../JS/DAL/ContactData.json"></script>
    <script type="text/javascript" src="../JS/Model/OneGmachModel.js"></script>
    <script type="text/javascript" src="../JS/DAL/TransactionDAL.js"></script>
    <script type="text/javascript" src="../JS/Model/TransactionModel.js"></script>
   <script type="text/javascript" src="../JS/DAL/ContactDAL.js"></script>
    <script type="text/javascript" src="../JS/Model/ContactModel.js"></script>
    <script src="../JS/UI/HeaderUI.js"></script>
    <script>
        var getUrlParameter = function getUrlParameter(sParam) {
            var sPageURL = decodeURIComponent(window.location.search.substring(1)),
                sURLVariables = sPageURL.split('&'),
                sParameterName,
                i;

            for (i = 0; i < sURLVariables.length; i++) {
                sParameterName = sURLVariables[i].split('=');

                if (sParameterName[0] === sParam) {
                    return sParameterName[1] === undefined ? true : sParameterName[1];
                }
            }
        };
        var idfromqs = getUrlParameter('id') ? getUrlParameter('id') : null;
        
        var contact=null; 
        $(document).ready(function () {
       
            if (idfromqs!= null) {
                 contact = GMach.Model.Contact.GetDataContact(idfromqs);
               $('#FirstName').val(contact.firstName);
              $('#LastName').val(contact.lastName);
              $('#IdNumber').val(contact.IdNumber);
              $('#PhoneNumber').val(contact.phoneNumber);
              $('#MobileNumber').val(contact.mobileNumber);
              $('#Address').val(contact.address);
              $('#Remarks').val(contact.remarks);
                //$('h2').text(f+" " +l);
            } else {
                contact = new GMach.Model.Contact();
                var oneGmach = new GMach.Model.OneGmach();
                contact.id = oneGmach.nextContactID;
            }
            
            $("#btn_save").click(function () {
               // if (isvalid()) {

               // }
                contact.firstName = $('#FirstName').val();
                contact.lastName=$('#LastName').val();
                contact.IdNumber= $('#IdNumber').val();
                contact.phoneNumber = $('#PhoneNumber').val();
                contact.mobileNumber = $('#MobileNumber').val();
                contact.address = $('#Address').val();
                contact.remarks = $('#Remarks').val();
                debugger;
                if ( GMach.Model.Contact.SetDataContact(contact, idfromqs)) {
                    window.location = "/HTML/Contacts.html";
                }
               

            });
            $("#btn_cancel").click(function (contact) {
                window.location = "/HTML/Contacts.html";

            });
        });
    </script>

</head>
<body>
    <header id="header">
        <!-- Content will be inserted by jQuery from header.html -->
    </header>
    <main>
        <div id="Contact-form"  > 
            <form novalidate>

                <div>
                    <h1>איש קשר</h1>
                    <h2></h2>
                    <section>


                        <div>
                            <label for="FirstName">שם פרטי:</label>
                            <input id="FirstName" name="FirstName" type="text" >
                        </div>

                        <div>
                            <label for="LastName">שם משפחה:</label>
                            <input id="LastName" name="LastName" type="text" >
                        </div>

                        <div>
                            <label for="IdNumber">תעודת זהות:</label>
                            <input id="IdNumber" name="IdNumber" type="text" >
                        </div>

                        <div>
                            <label for="PhoneNumber">טלפון:</label>
                            <input id="PhoneNumber" name="PhoneNumber" type="text" >
                        </div>

                        <div>
                            <label for="MobileNumber">נייד:</label>
                            <input id="MobileNumber" name="MobileNumber" type="text" >
                        </div>

                        <div>
                            <label for="Address">כתובת:</label>
                            <input id="Address" name="Address" type="text" >
                        </div>

                        <div>
                            <label for="Remarks">הערות:</label>
                            <input id="Remarks" name="Remarks" type="text" >
                        </div>

                        <div>
                            <span>הלוואות</span>
                            <table></table>
                            <label>סה"כ הלוואות פתוחות:</label>
                            <label id="SumDebit">25</label><span>ש"ח</span>
                        </div>

                        <div>
                            <span>הפקדות</span>
                            <table></table>
                            <label>סה"כ הפקדות פתוחות:</label>
                            <label id="SumDebit">15</label><span>ש"ח</span>
                        </div>

                        <div>
                            <span>תרומות</span>
                            <table></table>
                        </div>

                        <button type="button" id="btn_save" >שמירה</button>
                        <button type="button" id="btn_cancel">ביטול</button>

                    </section>
                </div>
            </form>
</div>



    </main>
</body>
</html>
